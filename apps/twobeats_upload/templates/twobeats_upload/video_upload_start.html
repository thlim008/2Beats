{% extends "base.html" %}

{% block content %}
<div class="tb-upload-first">
  <h1 class="tb-page-title">Upload your video files.</h1>
  <p class="tb-page-subtitle">
    For best quality, use MP4, MOV, MKV.
  </p>

  <form method="post" enctype="multipart/form-data" class="tb-upload-drop-form">
    {% csrf_token %}

    {% if form.video_root.errors %}
      <div class="tb-form-errors">
        {{ form.video_root.errors }}
      </div>
    {% endif %}

    <div class="tb-upload-dropwrap">
      <div class="tb-upload-dropzone"
           onclick="document.getElementById('id_video_root').click()">
        <div class="tb-upload-drop-inner">
          <div class="tb-upload-text-main">
            Drag and drop video files to get started.
          </div>
          <button type="button" class="tb-upload-drop-btn">
            Choose files
          </button>
          <div class="tb-upload-text-sub">
            Or click to browse from your device.
          </div>
        </div>
      </div>
    </div>

    {{ form.video_root }}

  </form>
</div>

<script>
  const vInput = document.getElementById('id_video_root');
  if (vInput) {
    vInput.style.display = 'none';
    vInput.addEventListener('change', function () {
      if (this.files.length > 0) {
        this.form.submit();
      }
    });
  }
</script>
{% endblock %}
